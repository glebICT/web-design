<!DOCTYPE html>
<html>
<head>
  <title>Python WebSocket Pong</title>
  <style>
    body { margin: 0; background: #000; color: #fff; font-family: Arial; }
    canvas { display: block; }
    #info { position: absolute; top: 10px; left: 10px; }
  </style>
</head>
<body>
  <canvas id="canvas" width="800" height="600"></canvas>
  <div id="info">Connect to ws://YOUR_SERVER_IP:8765</div>
  
  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const info = document.getElementById('info');
    
    // Replace with your server IP
    const ws = new WebSocket('ws://localhost:8765');
    
    let myY = 250;
    const keys = {};

    window.addEventListener('keydown', e => keys[e.key] = true);
    window.addEventListener('keyup', e => keys[e.key] = false);

    function update() {
      if (keys['ArrowUp'] || keys['w']) myY = Math.max(0, myY - 5);
      if (keys['ArrowDown'] || keys['s']) myY = Math.min(550, myY + 5);
      
      ws.send(JSON.stringify({ y: myY }));
      requestAnimationFrame(update);
    }

    ws.onopen = () => {
      info.textContent = 'Connected! Use ↑↓ or WASD';
      update();
    };

    ws.onmessage = (event) => {
      const state = JSON.parse(event.data);
      
      ctx.clearRect(0, 0, 800, 600);
      
      // Draw ball
      ctx.fillStyle = '#fff';
      ctx.fillRect(state.ball.x - 5, state.ball.y - 5, 10, 10);
      
      // Draw players with IP labels
      Object.entries(state.players).forEach(([id, player]) => {
        const x = id === Object.keys(state.players)[0] ? 0 : 750;  // Left/Right paddle
        ctx.fillStyle = '#0f0';
        ctx.fillRect(x, player.y - 25, 10, 50);
        
        // Show IP and score
        ctx.fillStyle = '#fff';
        ctx.font = '16px Arial';
        ctx.fillText(`${player.ip.slice(0,12)}...`, x + 15, player.y);
        ctx.fillText(`Score: ${player.score}`, x + 15, 30);
      });
    };

    ws.onerror = () => info.textContent = 'Connection failed';
  </script>
</body>
</html>
